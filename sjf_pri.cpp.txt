#include <iostream>
#include <climits>   
using namespace std;

int main() {
    int n;
    cout << "Enter number of processes: ";
    cin >> n;

    int pid[20], arrival[20], burst[20], remaining[20];
    int wait[20] = {0}, turn[20] = {0};
    int complete = 0, t = 0, shortest = 0, minm = INT_MAX, finish_time;
    bool check = false;


    for (int i = 0; i < n; i++) {
        pid[i] = i + 1;
        cout << "Enter Arrival and Burst time for P" << pid[i] << ": ";
        cin >> arrival[i] >> burst[i];
        remaining[i] = burst[i];
    }

    string gantt = "";  

 
    while (complete != n) {
        for (int j = 0; j < n; j++) {
            if (arrival[j] <= t && remaining[j] < minm && remaining[j] > 0) {
                minm = remaining[j];
                shortest = j;
                check = true;
            }
        }

        if (!check) {
            gantt += "| idle ";
            t++;
            continue;
        }

        remaining[shortest]--; 
        gantt += "| P" + to_string(pid[shortest]) + " ";

        minm = (remaining[shortest] > 0) ? remaining[shortest] : INT_MAX;

        if (remaining[shortest] == 0) {
            complete++;
            check = false;
            finish_time = t + 1;
            wait[shortest] = finish_time - burst[shortest] - arrival[shortest];
            if (wait[shortest] < 0)
                wait[shortest] = 0;
        }
        t++;
    }


    for (int i = 0; i < n; i++)
        turn[i] = burst[i] + wait[i];


    cout << "\n--- SJF (Preemptive) Scheduling ---\n";
    cout << "PID\tArr\tBurst\tWait\tTurn\n";
    for (int i = 0; i < n; i++)
        cout << pid[i] << "\t" << arrival[i] << "\t" << burst[i]
             << "\t" << wait[i] << "\t" << turn[i] << endl;

    cout << "\nGantt Chart:\n" << gantt << "|" << endl;

    return 0;
}